<@formGroup labelKey='#i18n{module.newsletter.document.modify_document_topic.useCategories}' helpKey='#i18n{module.newsletter.document.modify_document_topic.useCategoriesHelp}' mandatory=true>
	<@radioButton orientation='inline' id='use_categories' name='use_categories' value='true' checked=newsletterDocument.useDocumentCategories disabled=!category_list?has_content labelFor='use_categories' labelKey='#i18n{module.newsletter.document.modify_document_topic.radioUseCategories}' />
	<@radioButton orientation='inline' id='use_portlets' name='use_categories' value='false' checked=!newsletterDocument.useDocumentCategories disabled=!document_list_portlets?has_content labelFor='use_portlets' labelKey='#i18n{module.newsletter.document.modify_document_topic.radioUsePortlets}' />
</@formGroup>

<@formGroup id='categories' labelFor='category_list_id' labelKey='#i18n{module.newsletter.document.modify_document_topic.categoryList}' mandatory=true>
	<#if category_list?has_content>
		<@select multiple=5 id='category_list_id' name='category_list_id'>
			<#list category_list as item>
				<#if item.checked>
					<option selected="selected" value="${item.code}" title="${item.name}">${item.name}</option>
				<#else>
					<option value="${item.code}" title="${item.name}">${item.name}</option>
				</#if>
			</#list>
		</@select>
	<#else>
		<@staticText>#i18n{module.newsletter.document.modify_document_topic.labelNoCategory}</@staticText>
	</#if>
</@formGroup>

<@formGroup id='documents' labelFor='portlets_id' labelKey='#i18n{module.newsletter.document.modify_document_topic.portletList}' mandatory=true>
	<#if document_list_portlets?has_content>
		<@select multiple=5 id='portlets_id name='portlets_id'>
			<#list document_list_portlets as item>
				<#if item.checked>
					<option selected="selected" value="${item.code}" title="${item.name}">${item.name}</option>
				<#else>
					<option value="${item.code}" title="${item.name}">${item.name}</option>
				</#if>
			</#list>
		</@select>
	<#else>
		<@alert color='warning'>#i18n{module.newsletter.document.modify_document_topic.labelNoPortlet}</@alert>
	</#if>
</@formGroup>

<@formGroup labelFor='template_id' labelKey='#i18n{module.newsletter.document.modify_document_topic.templatesList}' helpKey='#i18n{module.newsletter.document.modify_document_topic.templatesHelp}' mandatory=true>
	<#if templates_list?has_content>
		<#list templates_list as template>
			<#assign labelKey>
				<img src="${img_path}/${template.picture}" class="img-thumbnail" alt="${template.description}" title="${template.description}"> ${template.description}
			</#assign>
			<@radioButton orientation='inline' name='template_id' value='${template.id}' checked=template.id=newsletterDocument.idTemplate labelFor='template_id' labelKey=labelKey />
		</#list>
	<#else>
		<@input type='hidden' name='template_id' value='0' />
		<@alert color='warning' iconTitle='warning' title='#i18n{newsletter.compose_newsletter.noNewsletterTemplate}' />
	</#if>
</@formGroup>

<script>
$(function(){
	$("<#if newsletterDocument.useDocumentCategories>#documents<#else>#categories</#if>").toggle();
	$("#use_categories").on("change", function(){
		$("#documents").toggle();
		$("#categories").toggle();
		$("#portlets_id option:selected").each(function(){
				$(this).removeAttr("selected");
		});
	});

	$("#use_portlets").on("change", function(){
		$("#documents").toggle();
		$("#categories").toggle();
		$("#category_list_id option:selected").each(function(){
				$(this).removeAttr("selected");
		});
	});
});
</script>
