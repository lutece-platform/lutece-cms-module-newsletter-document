<@formGroup labelKey='#i18n{module.newsletter.document.modify_document_topic.useCategories}' helpKey='#i18n{module.newsletter.document.modify_document_topic.useCategoriesHelp}' mandatory=true>
	<@radioButton orientation='inline' name='use_categories' id='use_categories' value='true' checked=newsletterDocument.useDocumentCategories labelFor='use_categories' labelKey='#i18n{module.newsletter.document.modify_document_topic.radioUseCategories}' />
	<@radioButton orientation='inline' name='use_portlets' id='use_portlets' value='false' checked=!newsletterDocument.useDocumentCategories labelFor='use_portlets' labelKey='#i18n{module.newsletter.document.modify_document_topic.radioUsePortlets}' />
</@formGroup>

<@formGroup id='category' labelFor='category_list_id' labelKey='#i18n{module.newsletter.document.modify_document_topic.categoryList}' mandatory=true>
	<#if category_list?has_content>
		<@select multiple=5 id='category_list_id' name='category_list_id' params='onchange="javascript:clearSelection(document.getElementById('portlets_id'));$('#use_categories').attr('checked', true);"'>
			<#list category_list as item>
				<#if item.checked>
					<option selected="selected" value="${item.code}" title="${item.name}">${item.name}</option>
				<#else>
					<option value="${item.code}" title="${item.name}">${item.name}</option>
				</#if>
			</#list>
		</@select>
	<#else>
		<@staticText>#i18n{module.newsletter.document.modify_document_topic.labelNoCategory}</@staticText>
	</#if>
</@formGroup>

<@formGroup id='document' labelFor='portlets_id' labelKey='#i18n{module.newsletter.document.modify_document_topic.portletList}' mandatory=true>
	<#if document_list_portlets?has_content>
		<@select multiple=5 id='portlets_id' name='portlets_id' params='onchange="javascript:clearSelection(document.getElementById('category_list_id'));$('#use_portlets').attr('checked', true);"'>
			<#list document_list_portlets as item>
				<#if item.checked>
					<option selected="selected" value="${item.code}" title="${item.name}">${item.name}</option>
				<#else>
					<option value="${item.code}" title="${item.name}">${item.name}</option>
				</#if>
			</#list>
		</@select>
	<#else>
		<@staticText>#i18n{module.newsletter.document.modify_document_topic.labelNoPortlet}</@staticText>
	</#if>
</@formGroup>

<@formGroup labelFor='template_id' labelKey='#i18n{module.newsletter.document.modify_document_topic.templatesList}' helpKey='#i18n{module.newsletter.document.modify_document_topic.templatesHelp}' mandatory=true>
	<#if templates_list?has_content>
		<#list templates_list as template>
			<@radioButton name='template_id' value='${template.id}' checked=template.id=newsletterDocument.idTemplate labelFor='template_id' labelKey='${template.description}' />
			<!-- <img src="${img_path}/${template.picture}" class="thumblist-medium" alt="${template.description}" title="${template.description}"> -->
		</#list>
	<#else>
		<@input type='hidden' name='template_id' value='0' />
		<@alert color='warning' iconTitle='warning' title='#i18n{newsletter.compose_newsletter.noNewsletterTemplate}' />
	</#if>
</@formGroup>

<script>
function clearSelection( select ){
	var nb=select.options.length;
	for(i=0;i<nb;i++){select.options[i].selected=false;}
}
</script>
